<!DOCTYPE html>
<html lang="english">
<head>
          <title>Jack McKew's Blog - Python Decorators Explained</title>
        <meta charset="utf-8" />




    <meta name="tags" content="python" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://jackmckew.dev/">Jack McKew's Blog <strong>Python enthusiast, electrical engineer and tinkerer</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li><a href="/sitemap.xml">Sitemap</a></li>
            <li><a href="https://jackmckew.dev/pages/contact.html">Contact</a></li>
            <li><a href="https://jackmckew.dev/pages/cv-professional.html">CV/Professional</a></li>
            <li><a href="https://jackmckew.dev/category/android.html">Android</a></li>
            <li><a href="https://jackmckew.dev/category/book-reviews.html">Book Reviews</a></li>
            <li><a href="https://jackmckew.dev/category/data-science.html">Data Science</a></li>
            <li><a href="https://jackmckew.dev/category/engineering.html">Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/engineering-python.html">Engineering, Python</a></li>
            <li><a href="https://jackmckew.dev/category/machine-learning.html">Machine Learning</a></li>
            <li><a href="https://jackmckew.dev/category/principles.html">Principles</a></li>
            <li class="active"><a href="https://jackmckew.dev/category/python.html">Python</a></li>
            <li><a href="https://jackmckew.dev/category/python-data-science.html">Python, Data Science</a></li>
            <li><a href="https://jackmckew.dev/category/python-engineering.html">Python, Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/python-principles.html">Python, Principles</a></li>
            <li><a href="https://jackmckew.dev/category/software-development.html">Software Development</a></li>
            <li><a href="https://jackmckew.dev/category/software-development-data-science.html">Software Development, Data Science</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://jackmckew.dev/python-decorators-explained.html" rel="bookmark"
         title="Permalink to Python Decorators Explained">Python Decorators Explained</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2019-05-24T06:30:00+10:00">
      Fri 24 May 2019
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://jackmckew.dev/author/jack-mckew.html">Jack McKew</a>
    </address>
    <div class="category">
        Category: <a href="https://jackmckew.dev/category/python.html">Python</a>
    </div>
    <div class="tags">
        Tags:
            <a href="https://jackmckew.dev/tag/python.html">python</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Python decorators are one of the most difficult concepts in Python to grasp, and subsequently a lot of beginners struggle. However they help to shorten code and make it more 'Pythonic'. This post is going to go through some basic examples where decorators can shorten your code.</p>
<p>Firstly you have to understand functions within python:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Jack&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="n">name</span>

<span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="p">())</span>
<span class="c1"># output: &#39;Hello Jack&#39;</span>

<span class="n">greeting</span> <span class="o">=</span> <span class="n">hello</span>
<span class="c1"># assign a function to a variable, with no parentheses as we are not calling it</span>

<span class="k">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">())</span>
<span class="c1"># output: &#39;Hello Jack&#39;</span>

<span class="k">del</span> <span class="n">hello</span>
<span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="p">())</span>
<span class="c1"># output: NameError</span>

<span class="k">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">())</span>
<span class="c1"># output: &#39;Hello Jack&#39;</span>
</pre></div>
</td></tr></table>

<p>As we can see above we can give functions default arguments (the string 'Jack' for the name variable in hello). Assign functions to variables (ensuring the parentheses are not included otherwise we would be assigning to the returning value from the function. Remove previous functions now that we have 'copied' the function over.</p>
<p>Now to take the next step into functions within Python, by defining functions within functions:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Jack&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;You&#39;re now inside the hello() function&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">greeting</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;Now you are in the greeting() function&quot;</span>
    <span class="k">def</span> <span class="nf">welcome</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;Now you are in the welcome() function&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">greet</span><span class="p">())</span>
    <span class="k">print</span><span class="p">(</span><span class="n">welcome</span><span class="p">())</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;You are now back in the hello() function&quot;</span>
<span class="n">hello</span><span class="p">()</span>
<span class="c1"># outputs: &quot;You&#39;re now inside the hello() function&quot;</span>
<span class="c1">#          &quot;Now you are in the greeting() function&quot;</span>
<span class="c1">#          &quot;Now you are in the welcome() function&quot; </span>
<span class="c1">#          &quot;You are now back in the hello() function&quot;</span>

<span class="n">welcome</span><span class="p">()</span>
<span class="c1"># output: NameError: name &#39;welcome&#39; is not defined</span>
</pre></div>
</td></tr></table>

<p>Now we can make nested functions (functions within functions), the next step is, functions returning functions.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Jack&#39;</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">greeting</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;Now you are in the greeting() function&quot;</span>
    <span class="k">def</span> <span class="nf">welcome</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;Now you are in the welcome() function&quot;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Jack&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">greeting</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">welcome</span>

<span class="n">returned_function</span> <span class="o">=</span> <span class="n">hello</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">returned_function</span><span class="p">)</span>
<span class="c1"># output: &lt;function greeting at 0x7f2143c01500&gt;</span>

<span class="c1"># This clearly shows that the returned function is the greeting() function within the hello() function</span>

<span class="k">print</span><span class="p">(</span><span class="n">returned_function</span><span class="p">()):</span>
<span class="c1"># output: &quot;Now you are in the greeting() function&quot;</span>
</pre></div>
</td></tr></table>

<p>From earlier, we know that if we don't include the parentheses then the function does not executed. Another extension of the way this is formatted is that we can now call hello()() which outputs "Now you are in the greeting() function".</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Jack&quot;</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="n">name</span>

<span class="k">def</span> <span class="nf">preFunction</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;This is the prefunction function&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="p">())</span>

<span class="n">preFunction</span><span class="p">(</span><span class="n">hello</span><span class="p">)</span>
<span class="c1"># output: &quot;This is the prefunction function&quot;</span>
<span class="c1">#         &quot;Hello Jack&quot;</span>
</pre></div>
</td></tr></table>

<p>Now you have all the knowledge to learn what decorators really are, they let you execute code before and after a function. The code above is actually a decorator, but let's make it more usable.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">new_decorator</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">functionWrapped</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;This is the pre function&quot;</span><span class="p">)</span>
        <span class="n">function</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;This is the post function&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">functionWrapped</span>

<span class="k">def</span> <span class="nf">function_requiring_decoration</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;I need some decorations!&quot;</span><span class="p">)</span>

<span class="n">function_requiring_decoration</span><span class="p">()</span>
<span class="c1"># output: &quot;I need some decorations&quot;</span>

<span class="n">function_requiring_decoration</span> <span class="o">=</span> <span class="n">new_decorator</span><span class="p">(</span><span class="n">function_requiring_decoration</span><span class="p">)</span>
<span class="c1"># Now our function is wrapped by functionWrapped()</span>

<span class="n">function_requiring_decoration</span><span class="p">()</span>
<span class="c1"># output: &quot;This is the pre function&quot;</span>
<span class="c1">#         &quot;I need some decoration&quot;</span>
<span class="c1">#         &quot;This is the post function&quot;</span>
</pre></div>
</td></tr></table>

<p>Now you've made a decorator! We've just used what we learned previously to modify it's behaviour in one way or another. Now to make it even more concise we can just the @ symbol. Here is how we could have used the previous code with @ symbol.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@new_decorator</span>
<span class="k">def</span> <span class="nf">function_requiring_decoration</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;I need some decorations!&quot;</span><span class="p">)</span>

<span class="n">function_requiring_decoration</span><span class="p">()</span>
<span class="c1"># output: &quot;This is the pre function&quot;</span>
<span class="c1">#         &quot;I need some decoration&quot;</span>
<span class="c1">#         &quot;This is the post function&quot;</span>

<span class="c1"># The @ operator is a short way of saying:</span>
<span class="n">function_requiring_decoration</span> <span class="o">=</span> <span class="n">new_decorator</span><span class="p">(</span><span class="n">function_requiring_decoration</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Hopefully now you are ready to go and explore the world of -decorators within Python, they can be used quite powerfully and allow for you to reuse code and extend capabilities. Some of the best examples for decorators are for authentication or logging, however I will not cover them as they are extensively documented over the internet.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>