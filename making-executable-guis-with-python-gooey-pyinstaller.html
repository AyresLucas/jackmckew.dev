<!DOCTYPE html>
<html lang="english">
<head>
          <title>Jack McKew's Blog - Making Executable GUIs with Python, Gooey & Pyinstaller</title>
        <meta charset="utf-8" />




    <meta name="tags" content="python" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://jackmckew.dev/">Jack McKew's Blog <strong>Python enthusiast, electrical engineer and tinkerer</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li><a href="/sitemap.xml">Sitemap</a></li>
            <li><a href="https://jackmckew.dev/pages/contact.html">Contact</a></li>
            <li><a href="https://jackmckew.dev/pages/cv-professional.html">CV/Professional</a></li>
            <li><a href="https://jackmckew.dev/category/android.html">Android</a></li>
            <li><a href="https://jackmckew.dev/category/book-reviews.html">Book Reviews</a></li>
            <li><a href="https://jackmckew.dev/category/data-science.html">Data Science</a></li>
            <li><a href="https://jackmckew.dev/category/engineering.html">Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/engineering-python.html">Engineering, Python</a></li>
            <li><a href="https://jackmckew.dev/category/machine-learning.html">Machine Learning</a></li>
            <li><a href="https://jackmckew.dev/category/principles.html">Principles</a></li>
            <li class="active"><a href="https://jackmckew.dev/category/python.html">Python</a></li>
            <li><a href="https://jackmckew.dev/category/python-data-science.html">Python, Data Science</a></li>
            <li><a href="https://jackmckew.dev/category/python-engineering.html">Python, Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/python-principles.html">Python, Principles</a></li>
            <li><a href="https://jackmckew.dev/category/software-development.html">Software Development</a></li>
            <li><a href="https://jackmckew.dev/category/software-development-data-science.html">Software Development, Data Science</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://jackmckew.dev/making-executable-guis-with-python-gooey-pyinstaller.html" rel="bookmark"
         title="Permalink to Making Executable GUIs with Python, Gooey & Pyinstaller">Making Executable GUIs with Python, Gooey & Pyinstaller</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2019-11-01T06:30:00+11:00">
      Fri 01 November 2019
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://jackmckew.dev/author/jack-mckew.html">Jack McKew</a>
    </address>
    <div class="category">
        Category: <a href="https://jackmckew.dev/category/python.html">Python</a>
    </div>
    <div class="tags">
        Tags:
            <a href="https://jackmckew.dev/tag/python.html">python</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Today we will go through how to go from a python script to packaged executable with a guided user interface (GUI) for users. First off we still start by writing the scripts that we would like to share with others to be able to use, especially for users that may be uncomfortable in a programming environment and would feel at home with a GUI.</p>
<p>My personal favourite part about <a href="https://github.com/chriskiehl/Gooey">Gooey</a>, is that you are essentially creating a command line interface (CLI) tool, which Gooey then uses to generate a GUI. This eliminates having two separate code bases to facilitate CLI &amp; GUI users, which can be very painful at times.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_file_name</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">filesize</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inputs:</span>
<span class="sd">        path (str): filepath to file selected</span>
<span class="sd">        filezize (bool): whether to print the file size or not</span>
<span class="sd">    Prints file name of file from path given and if filesize is true then will print the total size of the file in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">filesize</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File size: {os.path.getsize(path)} bytes&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_files_in_folder</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">extension</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inputs:</span>
<span class="sd">        path (str): path to folder selected</span>
<span class="sd">        extension (str): extension to filter by</span>
<span class="sd">    Prints all files in folder, if an extension is given, will only print the files with the given extension</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">extension</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">extension</span><span class="p">):</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>
</pre></div>
</td></tr></table>

<p>The 2 functions defined above are for getting information of selected files, or returning a list of files found within a folder (and subfolders).</p>
<p>Now to use <a href="https://github.com/chriskiehl/Gooey">Gooey</a>, we need to define a 'main' function for parsing the arguments for the GUI to generate controls. As Gooey is based on the argparse library, if you have previously built CLI tools with argparse, the migration to Gooey is quite simplistic. However as there is always edge cases, ensure to check your tools functionality once you have developed it.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Gooey</span><span class="p">(</span><span class="n">optional_cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">program_name</span><span class="o">=</span><span class="s2">&quot;Gooey Executable with Pyinstaller&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
    <span class="n">prog_descrip</span> <span class="o">=</span> <span class="s1">&#39;Pyinstaller example with Gooey&#39;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">GooeyParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">prog_descrip</span><span class="p">)</span>

    <span class="n">sub_parsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;commands&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;command&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span> <span class="o">=</span> <span class="n">sub_parsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;This function prints the chosen file name&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select a random file&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="s1">&#39;FileChooser&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--file-size&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Do you want to print the file size?&#39;</span><span class="p">,</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span> <span class="o">=</span> <span class="n">sub_parsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;This funtion prints all files in a folder&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;folder_path&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select a folder&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="s1">&#39;DirChooser&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--file-type&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Specify file type with .jpg&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">args</span>
</pre></div>
</td></tr></table>

<p>By using the Gooey decorator we are able to define many different layout options for our GUI. Since we are trying to enable users to use multiple scripts which are different and separate, I personally like to the optional columns layout, but there are many other types of layouts which can be seen here: https://github.com/chriskiehl/Gooey#layout-customization.</p>
<p>Following this we create our argument parsing function, and in which we define parsers, subparsers and add the arguments. This post will not be covering how to write CLIs, but it is on the list for future posts.</p>
<p>To complete the script, we need to put in the functionality at startup.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conf</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span>
        <span class="n">print_file_name</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span><span class="n">conf</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">conf</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;folder&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">get_files_in_folder</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span><span class="n">conf</span><span class="o">.</span><span class="n">file_type</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p>By embedding the command names within the arguments we are able to use a variety of functions which may or may not be interconnected.</p>
<p>Once this file is run will generate the following:</p>
<p><img alt="image-20191102174048814" src="..\img\making-executable-guis-with-python-gooey-pyinstaller\image-20191102174048814.png"></p>
<p><img alt="image-20191102174059066" src="..\img\making-executable-guis-with-python-gooey-pyinstaller\image-20191102174059066.png"></p>
<p>Which are fully embedded within the windows file explorer system for selecting files, folders, etc.</p>
<p>Now to package this GUI as an executable, we use <a href="https://www.pyinstaller.org/">PyInstaller</a>. By following Chris Kiehl's (Developer of Gooey) instructions on using Pyinstaller and Gooey: https://chriskiehl.com/article/packaging-gooey-with-pyinstaller. All we need to is create a build.spec file within our directory and run pyinstaller build.spec. </p>
<p><img alt="image-20191102174521992" src="..\img\making-executable-guis-with-python-gooey-pyinstaller\image-20191102174521992.png"></p>
<p>This will then generate a build folder and a dist folder within your current directory. The build folder will contain all the files used in generating the executable, which is found within the dist folder.</p>
<p><img alt="image-20191102174758361" src="..\img\making-executable-guis-with-python-gooey-pyinstaller\image-20191102174758361.png"></p>
<p>The code in it's entirety is:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gooey</span> <span class="kn">import</span> <span class="n">Gooey</span><span class="p">,</span> <span class="n">GooeyParser</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="nd">@Gooey</span><span class="p">(</span><span class="n">optional_cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">program_name</span><span class="o">=</span><span class="s2">&quot;Gooey Executable with Pyinstaller&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
    <span class="n">prog_descrip</span> <span class="o">=</span> <span class="s1">&#39;Pyinstaller example with Gooey&#39;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">GooeyParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">prog_descrip</span><span class="p">)</span>

    <span class="n">sub_parsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;commands&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;command&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span> <span class="o">=</span> <span class="n">sub_parsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;This function prints the chosen file name&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select a random file&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="s1">&#39;FileChooser&#39;</span><span class="p">)</span>

    <span class="n">first_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--file-size&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Do you want to print the file size?&#39;</span><span class="p">,</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span> <span class="o">=</span> <span class="n">sub_parsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;folder&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;This funtion prints all files in a folder&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;folder_path&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select a folder&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="s1">&#39;DirChooser&#39;</span><span class="p">)</span>

    <span class="n">second_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--file-type&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Specify file type with .jpg&#39;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">args</span>

<span class="k">def</span> <span class="nf">print_file_name</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">filesize</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inputs:</span>
<span class="sd">        path (str): filepath to file selected</span>
<span class="sd">        filezize (bool): whether to print the file size or not</span>
<span class="sd">    Prints file name of file from path given and if filesize is true then will print the total size of the file in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">filesize</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File size: {os.path.getsize(path)} bytes&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_files_in_folder</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">extension</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inputs:</span>
<span class="sd">        path (str): path to folder selected</span>
<span class="sd">        extension (str): extension to filter by</span>
<span class="sd">    Prints all files in folder, if an extension is given, will only print the files with the given extension</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">extension</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">extension</span><span class="p">):</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conf</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span>
        <span class="n">print_file_name</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span><span class="n">conf</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">conf</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;folder&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">get_files_in_folder</span><span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span><span class="n">conf</span><span class="o">.</span><span class="n">file_type</span><span class="p">))</span>
</pre></div>
</td></tr></table>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>