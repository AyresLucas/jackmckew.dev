<!DOCTYPE html>
<html lang="english">
<head>
          <title>Jack McKew's Blog - Episode 9 - Web Enabled Universal Remote - Part 1</title>
        <meta charset="utf-8" />




    <meta name="tags" content="electronics" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://jackmckew.dev/">Jack McKew's Blog <strong>Python enthusiast, electrical engineer and tinkerer</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li><a href="/sitemap.xml">Sitemap</a></li>
            <li><a href="https://jackmckew.dev/pages/contact.html">Contact</a></li>
            <li><a href="https://jackmckew.dev/pages/cv-professional.html">CV/Professional</a></li>
            <li><a href="https://jackmckew.dev/category/android.html">Android</a></li>
            <li><a href="https://jackmckew.dev/category/book-reviews.html">Book Reviews</a></li>
            <li><a href="https://jackmckew.dev/category/data-science.html">Data Science</a></li>
            <li class="active"><a href="https://jackmckew.dev/category/engineering.html">Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/engineering-python.html">Engineering, Python</a></li>
            <li><a href="https://jackmckew.dev/category/machine-learning.html">Machine Learning</a></li>
            <li><a href="https://jackmckew.dev/category/principles.html">Principles</a></li>
            <li><a href="https://jackmckew.dev/category/python.html">Python</a></li>
            <li><a href="https://jackmckew.dev/category/python-data-science.html">Python, Data Science</a></li>
            <li><a href="https://jackmckew.dev/category/python-engineering.html">Python, Engineering</a></li>
            <li><a href="https://jackmckew.dev/category/python-principles.html">Python, Principles</a></li>
            <li><a href="https://jackmckew.dev/category/software-development.html">Software Development</a></li>
            <li><a href="https://jackmckew.dev/category/software-development-data-science.html">Software Development, Data Science</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://jackmckew.dev/episode-9-web-enabled-universal-remote-part-1.html" rel="bookmark"
         title="Permalink to Episode 9 - Web Enabled Universal Remote - Part 1">Episode 9 - Web Enabled Universal Remote - Part 1</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2019-01-18T07:30:00+11:00">
      Fri 18 January 2019
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://jackmckew.dev/author/admin.html">admin</a>
    </address>
    <div class="category">
        Category: <a href="https://jackmckew.dev/category/engineering.html">Engineering</a>
    </div>
    <div class="tags">
        Tags:
            <a href="https://jackmckew.dev/tag/electronics.html">electronics</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>I have a habit of misplacing all kinds of remotes within the house, TV, air conditioner, fans, etc, and having a different remote for everything can be quite annoying at times. So I decided to re-use some leftover components from a previous project to make a web enabled universal remote.</p>
<p>Since most existing remotes use infrared to send the signal from the remote to the device, I figured it would be simple enough to create a infrared signal 'decoder' and then use a infrared diode to then replicate this signal back to the device. Next consideration was what do hardware is needed to get this project up and running.</p>
<p>After researching a few other DIY remote control guides on the internet, I came up with a plan to use a wifi-enabled microcontroller together with an infrared receiver and an infrared diode. After rummaging through my spare hardware box, I happened to find a spare NodeMCU (ESP8266) that I could use for this project, this brings my part list to:</p>
<ul>
<li>Wifi-Enabled Microcontroller (NodeMCU)</li>
<li>A resistor to dampen the diode signal (100 ohm)</li>
<li>A transistor to boost the current from the NodeMCU so the diode signal gets to the device (2N222)</li>
<li>Infrared receiver (TSOP4136)</li>
<li>Infrared diode (L-7113F3BT)</li>
</ul>
<p>Now before connecting the entire circuit together, one should always test that components work in an expected way. To achieve this for the infrared receiver, a basic program to interface between the receiver and the microcontroller is needed.</p>
<p>For a basic test, an LED would light up whenever the infrared is receiving a signal. By following the circuit diagram with the corresponding code for the NodeMCU, this test for the receiver should be reproduce-able at home, please note that for other infrared receivers you will need to check the pin outs.<!-- /wp:paragraph --></p>
<!-- wp:image {"id":108} -->

<p><img alt="" src="../img/episode-9-web-enabled-universal-remote-part-1/Fritzing_FEKX395tbZ.png"></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#define ledPin D0 </span><span class="c1">//Connection at GPIO16 (D0) for the builtin LED on the NodeMCU board</span>
<span class="cp">#define inputPin D5 </span><span class="c1">//Connection at GPIO14 (D5) for the infrared receiver</span>
<span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// variable for reading the pin status </span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> 
<span class="p">{</span> 
   <span class="n">pinMode</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span> <span class="c1">// declare LED as output </span>
   <span class="n">pinMode</span><span class="p">(</span><span class="n">inputPin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span> <span class="c1">// declare Infrared sensor as input</span>
<span class="p">}</span> 
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span> 
   <span class="n">val</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">inputPin</span><span class="p">);</span> <span class="c1">// read input value </span>
   <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="n">HIGH</span><span class="p">)</span>
   <span class="p">{</span> <span class="c1">// check if the input is HIGH</span>
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// turn LED OFF   </span>
   <span class="p">}</span> 
   <span class="k">else</span> 
   <span class="p">{</span> 
      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// turn LED ON </span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>In the code above, this defines the pins that the sensor and LED are connected to, checks if the sensor is receiving a signal and then switches the builtin LED accordingly. Since the microcontroller loops without delay and an infrared remote control sends signals very quickly with delay in between, the LED only flickers when a remote is aimed at it, however proving the component works as expected.</p>
<p>Now that we have confirmed the receiver works as expected, we have to integrate and interface the infrared diode with the microcontroller such that we are able to send the decoded signals back at the device.</p>
<p>Since the NodeMCU can only pass a maximum current of 12mA through the GPIO pins, this will not be enough for the infrared diode peak spectrum which occurs at 20mA. To boost the current up from 12mA to 20mA+, it is best to use a simple transistor, for this project I had some 2N2222 transistors lying around so decided to use them. The following circuit diagram shows how the infrared diode, transistor and microcontroller integrate together.</p>
<p><img alt="" src="..\img\episode-9-web-enabled-universal-remote-part-1\Fritzing_LqJjWJppSm.png"></p>
<p>Since the human eye cannot see the infrared diode turning on/off, this creates a challenge for testing this component before implementing the project. I did not create a test specifically for the diode, and will test whether it works correctly later on in some function testing of the project.</p>
<p>This completes the hardware component of this project, the next part of this project will be the software. I am planning to utilise both docker and django on my home Raspberry Pi to act as a webserver that will issue commands to the microcontroller over a network to mimic the device's remote control.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>